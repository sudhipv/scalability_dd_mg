#!/bin/bash
#SBATCH --account=def-asarkar
#SBATCH --nodes=10
#SBATCH --ntasks-per-node=40
#SBATCH --time=00:30:00
##SBATCH --mem-per-cpu=3700M
#SBATCH --job-name=1L_weak_max200
#SBATCH --output=%x-%j.out
#SBATCH --mail-user=sudhipv@cmail.carleton.ca
#SBATCH --mail-type=ALL

module load CCEnv
module load StdEnv/2020


which mpiexec
which mpirun


mpirun -np 40 /home/a/asarkar/sudhipv/software/FreeFem-sources/src/mpi/FreeFem++-mpi poisson_1L.edp -m 750 -n 750 -nw -log_view

echo "#############################################################################################################"
echo "#############################################################################################################"
echo "########     Finsihed Code with NL 10 Processors             #################################################"
echo "#############################################################################################################"
echo "#############################################################################################################"

mpirun -np 80 /home/a/asarkar/sudhipv/software/FreeFem-sources/src/mpi/FreeFem++-mpi poisson_1L.edp -m 1061 -n 1061 -nw -log_view

echo "#############################################################################################################"
echo "#############################################################################################################"
echo "########     Finsihed Code with NL 10 Processors             #################################################"
echo "#############################################################################################################"
echo "#############################################################################################################"

mpirun -np 160 /home/a/asarkar/sudhipv/software/FreeFem-sources/src/mpi/FreeFem++-mpi poisson_1L.edp -m 1500 -n 1500 -nw -log_view

echo "#############################################################################################################"
echo "#############################################################################################################"
echo "########     Finsihed Code with NL 10 Processors             #################################################"
echo "#############################################################################################################"
echo "#############################################################################################################"


mpirun -np 240 /home/a/asarkar/sudhipv/software/FreeFem-sources/src/mpi/FreeFem++-mpi poisson_1L.edp -m 1838 -n 1838 -nw -log_view

echo "#############################################################################################################"
echo "#############################################################################################################"
echo "########     Finsihed Code with NL 10 Processors             #################################################"
echo "#############################################################################################################"
echo "#############################################################################################################"

mpirun -np 400 /home/a/asarkar/sudhipv/software/FreeFem-sources/src/mpi/FreeFem++-mpi poisson_1L.edp -m 2373 -n 2373 -nw -log_view

echo "#############################################################################################################"
echo "#############################################################################################################"
echo "########     Finsihed Code with NL 10 Processors             #################################################"
echo "#############################################################################################################"
echo "#############################################################################################################"


#   1 core 400200 dof. Failing
#        Cores                   dof(fine)           coarse grid

        # 40                        16008001            2000

        # 80                                            2828
        # 200                                           4472
        # 400                                           6325

#


#   1 core 100100 dof. Failing
#        Cores                   dof(fine)           coarse grid

        # 40                        4004001            1000

        # 80
        # 200                                           2237
        # 400                                           6325






exit
